
@{
    ViewBag.Title = "Recovery";
}

@section ScriptAndStyle
    {
    <style>
        #content {
            height: 400px;
            font-size: 14pt;
            font-family: Arial;
            padding-left: 50px;
            width: 750px;
        }

        #Recovery-form {
            margin: auto;
            width: 402px;
            height: auto;
            margin-top: 70px;
        }

        #avatar {
            width: 50px;
            height: 50px;
            float: none;
            border-top: solid black 1px;
            border-left: solid black 1px;
            border-bottom: solid black 1px;
        }

        #info {
            float: right;
            font-family: Arial;
            width: auto;
            height: 50px;
            padding-right: 5px;
            border-top: solid black 1px;
            border-right: solid black 1px;
            border-bottom: solid black 1px;
        }

        #LoginName {
            font-size: 14pt;
        }

        #FullName {
            font-size: 8pt;
            color: rgb(46, 116, 181);
        }

        span {
            font-size: 10pt;
        }

        label {
            margin-bottom: 10px;
        }

        form {
            margin-top: 20px;
        }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function Valid() {
            var val = $("#login").val()
            if (val === "")
                $("#error").text("Поле не может быть пустым");
            else {
                SendVal(val);
            }
        }
        function SendVal(val) {
            $.ajax({
                method: "Get",
                url: "@Url.Action("GetUserToRecovery", "Account")?login=" + val,
                contentType: "html",
                success: function (ResHtml) {
                    $("#Recovery-form").html(ResHtml);
                    SetMargin();
                },
                error: function () {
                    $("#error").text("Пользователь с логином не найден");
                }
            });
        }
        function SetMargin() {
            var SIZE = 692;

            var infoSize = $("#info").css("width").slice(0, -2);

            var newMargin = (SIZE - infoSize) + "px";

            $("#info").css("margin-right", newMargin);
            $("#Recovery-form").css("width", "auto").css("margin", "0px");
        }
    </script>
}
@Html.ValidationSummary()
<div id="Recovery-form">
    <label>Введите ваш логин:</label><br />
    <input id="login" class="text-box" type="text" /><span id="error"></span><br />
    <button class="button" onclick="Valid()">Найти</button>
</div>

