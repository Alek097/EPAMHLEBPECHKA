
@{
    ViewBag.Title = "Оповещания";

}

@using ChudoPechkaLib.Models
@using ChudoPechkaLib;

@section ScriptAndStyle{
    <style>
        .announced {
            padding: 5px;
            border-top: 1px solid black;
            border-bottom: 1px solid black;
        }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        var maxPage = '@ViewBag.MaxPage';
        var nextPage = 100;
        $(window).scroll(function () {
            if ($(window).scrollTop() == $(document).height() - $(window).height() && maxPage > nowPage) {
                $.ajax({
                    method: "Post",
                    url: "@Url.Action("GetAnnounced", "Announced")?page=" + nextPage,
                    contentType: "html",
                    success: function (ResHtml) {
                        $("#content").append(ResHtml);
                    }
                });
            }
        });

    </script>
    <script>
        function AcceptInvationToGroup(id) {
            var data = { 'Group_id': id, '__RequestVerificationToken': $('[name=__RequestVerificationToken]').val() };
            $.post("@Url.Action("AddUser", "Group")", data);
        }
    </script>
}
@Html.AntiForgeryToken()
@{Html.RenderAction("GetAnnounced", "Announced", new { page = 50 });}

